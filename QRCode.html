<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>QRCode</title>
    <script>
/*
G1: 49
G2: 98
G3: 198
E1: 41.2
E2: 82.4
E3: 164.8
D1: 36.7
D2: 73.4
D3: 146.8
C1: 32.7
C2: 65.4
C3: 130.8
*/


var div = ()=>{
return document.querySelector('div');
}

var windowsRip = [
"windows",
198, 250,
164.8, 250,
130.8, 250,
146.8, 1500,
49, 150
];

var rickroll = [
"rick",
98,125,
110,125,
130.8,125,
110,125,
164.8,375,
164.8,375,
146.8,750,
98,125,
110,125,
130.8,125,
110,125,
146.8,375,
146.8,375,
130.8,375,
123.5,125,
110,250,
98,125,
110,125,
130.8,125,
110,125,
130.8,500,
146.8,250,
123.4,375,
110,125,
98,500,
98,250,
146.8,500,
130.8,1000
];

var text = "Wieso ðŸ¤¨? Warum klickst du einfach so den Text an ðŸ˜¥?";

const audioCtx = new AudioContext();

const oscillator = audioCtx.createOscillator();

oscillator.type = "square";

var clickText = ["Ey...","Lass das!","Du wirst das bereuen!","Was hab ich grad eben gesagt?","LASS ES!","Oh nein...","Jetzt passiert es...","Bruh..."];

function clicked(clickCount){
div().setAttribute("onclick", "");
sound(50, 10);
div().innerHTML = "";
setTimeout(()=>{
div().innerHTML = clickText[clickCount];
sound(50, 10);
if(!clickText[clickCount + 1]) song(1, rickroll);
else div().setAttribute("onclick", `clicked(${clickCount + 1})`);
},1500);
}

function song(tick, data){
if(data[tick]){
oscillator.frequency.setValueAtTime(data[tick], audioCtx.currentTime);
oscillator.connect(audioCtx.destination);
setTimeout(()=>{
oscillator.disconnect(audioCtx.destination)
},100)
setTimeout(()=>{
song(tick + 2, data);
}, data[tick + 1])
}
else {
switch(data[0]){
case "rick":
setTimeout(()=>{
sound(100, 50)
div().innerHTML = "WOW! Das hast jetzt echt gebracht.";
}, 500);
setTimeout(()=>{
song(1, windowsRip);
},1500);
break;
case "windows":
window.close();
break;
}
}
}

function anim(stage){
var inner = div().innerHTML;
div().setAttribute("onclick", "");
setTimeout(()=>{
if(stage){
if(inner.length < text.length){
div().innerHTML += text.slice(inner.length, inner.length + 2);
sound(100, 200);
anim(true);
return;
}
else{
div().setAttribute("onclick", "clicked(0)");
return;
}
}
if(inner.length){
div().innerHTML = inner.slice(0, inner.length - 2);
sound(150, 50);
anim();
}
else anim(true);
},500)
}

function sound(startPitch, endPitch){
oscillator.frequency.setValueAtTime(startPitch, audioCtx.currentTime);
oscillator.connect(audioCtx.destination);
setTimeout(()=>{
oscillator.frequency.setValueAtTime(endPitch, audioCtx.currentTime);
},50);
setTimeout(()=>{
oscillator.disconnect(audioCtx.destination);
},100);
}
    </script>
<style>
  div{
    position: absolute;
    top: 50%;
    left: 50%;
    width: 90%;
    transform: translate(-50%, -50%);
    font-size: 30px;
    font-weight: bold;
    display: inline;
    text-align: center;
  }
    </style>
  </head>
  <body onload="setTimeout(()=>{
alert('Denk nicht mal dran den Text anzutippen!')
}, Math.random() * 1000 + 250);">
<div onclick="var div = document.querySelector('div'); anim(); oscillator.start();">Noch nix hier...<br>(text anklicken verboten)</div>
</body>
</html>
